<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Contact</title>
    <link rel="stylesheet" href="../style.css">
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
        (function(){
            emailjs.init("2yNyLdy_I-CRP_Xb4"); // Remplacez par votre ID d'utilisateur
        })();
    </script>
</head>
<body>
<header>
    <div class="me">
        <h1>Iheb Zaidi</h1>
        <p>Etudiant ingénieur en informatique</p>
    </div>
    <div class="nav">
        <ul>
            <li><a href="../index.html">Accueil</a></li>
            <li><a href="about.html">A propos</a></li>
            <li><a href="projetsacademique.html">Projets réalisés</a></li>
            <li><a href="certificats.html">Certificats</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </div>
</header>


<div class="contact">
    <h1>Contact Information</h1>
    <hr>
    <div class="image">
        <a href="https://www.linkedin.com/in/iheb-zaidi-345a0a18b" target=_blank><img src="../image/linkd.PNG" class="linkd"></a>
        <a href="https://www.facebook.com/profile.php?id=100006076816325" target=_blank><img src="../image/facebook.png" class="fb"></a>

    </div>
    <div class="cont">
    <h3>Adresse:</h3>
    <p>Tunis,Medenine        <br>
        Steg Médenine route gabes.NOUVELLE 
        MEDENINE -23,Tunisie,4130 </p>
    </div>
    <div class="cont">
        <h3>Téléphone:</h3>
        <p>+21652107756</p>
    </div>
    <hr>
    <form id="contactForm" onsubmit="sendMail(event)">
        <input type="text" id="prenom" placeholder="Prénom" required><br>
        <input type="email" id="email" placeholder="Email" required><br>
        <input type="text" id="sujet" placeholder="Sujet"><br>
        <textarea id="message" placeholder="Message.." required></textarea><br>
        <input type="submit" value="Envoyer">
    </form>
</div>

<script>
    function sendMail(event) {
        event.preventDefault();
    
        const formData = {
            service_id: "service_hx36u5b", // Remplacez par l'ID de service correct
            template_id: "template_2i1dguh", // Votre ID de template
            user_id: "2yNyLdy_I-CRP_Xb4", // Remplacez par votre ID d'utilisateur
            template_params: {
                prenom: document.getElementById('prenom').value,
                email: document.getElementById('email').value,
                sujet: document.getElementById('sujet').value,
                message: document.getElementById('message').value,
            }
        };
    
        fetch("https://api.emailjs.com/api/v1.0/email/send", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(formData),
        })
        .then(response => {
            if (!response.ok) {
                return response.text().then(text => { throw new Error(text); });
            }
            return response.text(); // Changez ceci pour retourner le texte brut
        })
        .then(data => {
            console.log("Message envoyé avec succès!", data);
            alert("Message envoyé avec succès !");
            document.getElementById("contactForm").reset(); // Réinitialiser le formulaire
        })
        .catch(error => {
            console.error("Erreur lors de l'envoi du message:", error);
            alert("Erreur lors de l'envoi du message. Veuillez réessayer plus tard.");
        });
    }
    
</script>

</body>
</html>
